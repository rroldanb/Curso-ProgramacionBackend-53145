<main>
    <div class="bienvenida mt-4">
      <h1>Hola {{username}}, bienvenido a nuestro e-commerce</h1>
      <h2>Contenido del Carrito de <strong>{{nombre}}</strong></h2>
        <p class="my-auto d-none" >CartID: <strong> {{cid}} </strong> </p>
      <div class="container rounded-3 p-2 d-flex  justify-content-between align-items-center" style="background-color: rgb(193, 193, 193);">
        <div>
        <a href="/products" class="btn btn-dark ms-4">Volver a la tienda <i class="bi bi-arrow-return-left"></i></a>
        <button class="btn btn-danger empty-cart-btn me-4" data-cart-id="{{cid}}">Vaciar carrito <i class="bi bi-cart-x"></i></button>
        </div>
        <div>
        <button class="btn btn-primary carrito-acciones-comprar" data-cart-id="{{cid}}">Finalizar Compra <i class="bi bi-cash-coin"></i></button>
        </div>
      </div>
    </div>


<section class="w-75 mx-auto mt-4">
  <div class="container">
    <div class="carrito-productos container">
      {{#if products.length}}
        {{#each products}}
          <div class="row carrito-producto bg-body mb-3 d-flex 
          flex-nowrap flex-row container-fluid rounded-3 p-2 
          align-items-center align-content-center"  id="product-{{@index}}">
            <div class="col-md-2">
              <img class="carrito-producto-imagen w-50" src="{{this.pid.thumbnails.[0]}}" alt="{{this.pid.title}}">
            </div>

                <div class="col-md-3">
                  <div class="carrito-producto-titulo d-flex flex-column align-items-center">
                    <small>Producto</small>
                    <h3>{{this.pid.title}}</h3>
                  </div>
                </div>

                <div class="col-md-1 ">
                  <div class="carrito-producto-stock d-flex flex-column align-items-center">
                    <small>Stock</small>
                    <h4 id="carrito-stock-{{this.pid._id}}">{{this.pid.stock}}</h4>
                  </div>
                </div>

                <div class="col-md-1 ">
                  <div class="carrito-producto-cantidad d-flex flex-column align-items-center">
                    <small>Cantidad</small>
                    <input class="carrito-producto-cantidad-input form-control border border-dark fs-5" type="number" value="{{this.quantity}}">
                  </div>
                </div>
                <div class="col-md-1">
                  <div class="carrito-producto-precio d-flex flex-column align-items-center">
                    <small>Precio</small>
                    <h4>{{this.pid.price}}</h4>
                  </div>
                </div>

                <div class="col-md-2">
                  <div class="carrito-producto-subtotal d-flex flex-column align-items-center">
                    <small>Subtotal</small>
                    <h4>{{multiply this.pid.price this.quantity}}</h4>
                  </div>
                </div>
                <div class="col-md-2">
                  <button class="btn btn-danger remove-from-cart-btn" data-cart-id="{{../cid}}" data-product-id="{{this.pid._id}}">Quitar del carrito <i class="bi bi-trash-fill"></i></button>
                </div>
          </div>
        {{/each}}
      {{else}}
        <div class="carrito-vacio">
          <h2>Su carrito está vacío <i class="bi bi-emoji-frown"></i></h2>
        </div>
      {{/if}}
    </div>

    {{#if products.length}}
      <div class="carrito-footer
        mb-3 d-flex 
          flex-nowrap flex-row container rounded-3 p-8 
          align-items-center justify-content-around" style="background-color: rgb(193, 193, 193);">
        <div class="">
        <button class="btn btn-danger empty-cart-btn" data-cart-id="{{cid}}">Vaciar carrito <i class="bi bi-cart-x"></i></button>
        </div>
          <div class="carrito-footer-cantidad d-flex flex-column align-items-center">
            <p>Cantidad de artículos:</p>
            <h4 id="cant">{{products.length}}</h4>
          </div>
          <div class="carrito-footer-total d-flex flex-column align-items-center">
            <p>Total Carrito:</p>
            <h3 id="total" >{{calculateTotal products}}</h3>
          </div>
        
        <button class="btn btn-primary carrito-acciones-comprar" data-cart-id="{{cid}}">Finalizar Compra <i class="bi bi-cash-coin"></i></button>

          {{!-- <button class="carrito-acciones-comprar " data-bs-toggle="modal" data-bs-target="#modalPago">Finalizar Compra</button> --}}

      </div>
    {{/if}}
  </div>
</section>



    <footer class="container">
      <p class="texto-footer mx-auto text-light">© 2024 Gagolabs</p>
    </footer>
  </div>
</main>

<script src="/js/home.js"></script>
<script src="/js/cart.js"></script>
