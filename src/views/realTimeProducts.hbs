<main>
  <div class="bienvenida">
    <h1>Hola {{username}} Bienvenido a nuestro e-commerce</h1>
    <h2> {{nombre}} {{apellido}} Aquí se pueden editar los productos</h2>
  </div>
    {{#if admin}}
      <div class="container-fluid h-100 ">
        <div class="row h-100 ">

          <div class="my-3 col-3 d-flex justify-content-center">
              <form id="productForm" class="rounded-0" >
                  <div class="card" id="newProdDetails" style="min-width: 380px;">
                    <h3>Agregar/editar productos</h3>
                      <p class="detail-item">Title: <input type="text" id="newProdTitle"></p>
                      <p class="detail-item">Descripción: <input type="text" id="newProdDescription"></p>
                      <p class="detail-item">Código: <input type="text" id="newProdCode"></p>
                      <p class="detail-item">Precio: <input type="text" id="newProdPrice"></p>
                      <p class="detail-item chk-boton">Activo: <input type="checkbox" id="btn-switch"><label for="btn-switch" class="lbl-switch"></label></p>
                      <p class="detail-item">Stock: <input type="text" id="newProdStock"></p>
                      <p class="detail-item">Categoría: <input type="text" id="newProdCategory"></p>
                      {{!-- <p class="detail-item">Imagen: <input type="file" name="image" id="newProdImage"></p> --}}
                      {{!-- <p class="detail-item">Imágenes: <input type="file" name="image" id="newProdImage" multiple></p>  --}}
                       <p class="detail-item">Imágenes: <input type="file" name="image" id="newProdImage" onchange="updateFileName(this)" multiple></p> <!-- Añadimos el atributo 'multiple' -->
                      <p class="detail-item">Rutas Imagenes:  <input type="text" id="newProdFileNames" readonly></p>   
 

                      <button class="btn btn-dark rounded-0">Guardar</button>
                  </div>
              </form>
          </div>

          <div class=" px-3 py-3 col-9 d-flex flex-wrap" id="realTimeProductsArea">

          </div>
        </div>
      </div>
    {{else}}
    <div class="container">
      <h2 style="color: rgb(177, 24, 24);">
        Necesitas permisos de administrador para editar los productos
      </h2>
    </div>
    {{/if}}
</main>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/editProducts.js"></script>
<script src="/js/realTimeProducts.js"></script>

<script src=" https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.all.min.js "></script>

<script>
//  Swal.fire({
//    title: "Vista rentringida",
//    input: "text",
//    inputLabel: "Solo el usuario admin tiene acceso",
//    allowOutsideClick: false,
//    inputValidator: (value) => {
//      if (!value) {
//        return "Debes indicar un nombre!";
//      }
//      return new Promise((resolve) => {
//        if (value === "admin") {
//          resolve();
//        } else {
//          resolve("solo el usuario admin tiene acceso :)");
//        }
//      });
//    }
//  });
    function updateFileName(input) {
        const fileNames = Array.from(input.files).map(file => file.name).join(', ');
        document.getElementById('newProdFileNames').value = fileNames;
    }
</script>